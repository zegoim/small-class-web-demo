{"version":3,"sources":["routes/TeacherRoom.tsx","utils/SilverRoom.ts","utils/getSearchQuery.ts","utils/liveRoomConfig.ts"],"names":["silverRoom","SilverRoom","initSDK","appId","liveRoomConfig","signKey","roomId","getSearchQuery","userId","faker","uuid","TeacherRoom","_React$Component","_getPrototypeOf2","_this","Object","C_Work_small_class_web_demo_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_4__","this","_len","arguments","length","args","Array","_key","C_Work_small_class_web_demo_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_6__","C_Work_small_class_web_demo_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_7__","call","apply","concat","context","state","videoEl","joinRoom","C_Work_small_class_web_demo_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_3__","C_Work_small_class_web_demo_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_2___default","a","mark","_callee","wrap","_context","prev","next","join","stop","startShare","_callee2","_context2","startPreview","setState","isPlaying","publish","C_Work_small_class_web_demo_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_8__","C_Work_small_class_web_demo_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_5__","key","value","_this2","attributes","C_Work_small_class_web_demo_node_modules_babel_runtime_helpers_esm_extends__WEBPACK_IMPORTED_MODULE_1__","props","theme","styles","style","prefixStyle","columnCenter","display","flexDirection","alignItems","justifyContent","rowCenter","root","C_Work_small_class_web_demo_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","left","top","width","height","video","position","objectFit","background","acrylicTexture60","videoContent","cursor","transition","opacity","transform","getStyles","classes","prepareStyles","react__WEBPACK_IMPORTED_MODULE_9__","assign","autoPlay","ref","onClick","react_uwp_Icon__WEBPACK_IMPORTED_MODULE_11___default","size","children","marginTop","React","contextTypes","PropTypes","_ZegoClient","C_Work_small_class_web_demo_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_3__","C_Work_small_class_web_demo_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_5__","C_Work_small_class_web_demo_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_6__","_defaultCacheConfig","publishStreamId","streamList","playingStreamIds","enableLayerCodec","sdkIsInitial","appVersion","_cacheSDKConfig","C_Work_small_class_web_demo_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_2__","_ref","C_Work_small_class_web_demo_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","C_Work_small_class_web_demo_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","para","idName","nickName","zegoConfig","getLoginToken","userName","loginTokenUrl","appid","server","logLevel","logUrl","audienceCreateRoom","remoteLogLevel","testEnvironment","config","Promise","resolve","reject","fetch","method","then","res","text","catch","loginToken","sent","console","error","abrupt","login","decodeURIComponent","handleStreamsUpdate","_x","leave","logout","unInitSDK","stopPublish","stopPreview","forEach","stream","index","stopPlayingStream","stream_id","release","viewEl","mediaStreamConstraints","success","publishViewEl","rej","ZegoClient","prototype","C_Work_small_class_web_demo_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__","audio","audioInput","videoInput","videoQuality","horizontal","streamId","Date","now","Math","ceil","random","pow","startPublishingStream","stopPublishingStream","playStream","code","startPlayingStream","includes","push","playStreams","streams","stopPlayStream","indexOf","splice","stopPlayStreams","streamIds","onStreamUpdated","type","newStreamList","streamListIds","map","newStreamListIds","id","newStream","startIndex","playingIndex","getEventData","handleEventDataChange","setUserStateUpdate","C_Work_small_class_web_demo_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_4__","pattern","test","location","href","match","slice","split","reduce","str","e","__webpack_require__","d","__webpack_exports__"],"mappings":"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","file":"static/js/5.8f2db403.chunk.js","sourcesContent":["import * as React from \"react\";\r\nimport * as PropTypes from \"prop-types\";\r\nimport Icon from \"react-uwp/Icon\";\r\nimport { SilverRoom } from \"../utils/SilverRoom\";\r\nimport getSearchQuery from \"../utils/getSearchQuery\";\r\nimport { liveRoomConfig } from \"../utils/liveRoomConfig\";\r\nimport * as faker from \"faker\";\r\n\r\nconst silverRoom = new SilverRoom();\r\nsilverRoom.initSDK({ appId: liveRoomConfig.appId, signKey: liveRoomConfig.signKey });\r\nconst search = getSearchQuery();\r\nconst roomId = search.roomId;\r\nconst userId = faker.random.uuid();\r\n\r\nexport interface DataProps {}\r\n\r\nexport interface TeacherRoomState {\r\n  isPlaying?: boolean;\r\n}\r\nexport interface TeacherRoomProps extends DataProps, React.HTMLAttributes<HTMLDivElement> {}\r\n\r\nexport class TeacherRoom extends React.Component<TeacherRoomProps, TeacherRoomState> {\r\n  static contextTypes = { theme: PropTypes.object };\r\n  context: { theme: ReactUWP.ThemeType };\r\n  state: TeacherRoomState = {};\r\n  videoEl: HTMLVideoElement;\r\n  \r\n  componentDidMount() {\r\n    this.joinRoom();\r\n  }\r\n\r\n  joinRoom = async () => {\r\n    await silverRoom.join({ roomId, userId });\r\n  }\r\n\r\n  startShare = async () => {\r\n    await silverRoom.startPreview(this.videoEl);\r\n    this.setState({\r\n      isPlaying: true\r\n    });\r\n    await silverRoom.publish(`${roomId}-streamId`);\r\n  }\r\n\r\n  render() {\r\n    const { ...attributes } = this.props;\r\n    const { theme } = this.context;\r\n    const { isPlaying } = this.state;\r\n    const styles = getStyles(this);\r\n    const classes = theme.prepareStyles({ styles });\r\n\r\n    return (\r\n      <div {...attributes} {...classes.root}>\r\n        <div {...classes.video} >\r\n          <video\r\n            {...classes.video}\r\n            autoPlay\r\n            ref={videoEl => this.videoEl = videoEl}\r\n          />\r\n          <div {...classes.videoContent} onClick={this.startShare}>\r\n            <Icon size={120} children=\"PlayLegacy\" />\r\n            <p style={{ marginTop: 24 }}>开始直播</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction getStyles(TeacherRoom: TeacherRoom) {\r\n  const {\r\n    context: { theme },\r\n    props: { style },\r\n    state: { isPlaying }\r\n  } = TeacherRoom;\r\n  const { prefixStyle } = theme;\r\n\r\n  const rowCenter = {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  } as React.CSSProperties;\r\n  const columnCenter = {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"center\",\r\n  } as React.CSSProperties;\r\n\r\n  return {\r\n    rowCenter: prefixStyle(rowCenter),\r\n    columnCenter: prefixStyle(columnCenter),\r\n    root: prefixStyle({\r\n      ...columnCenter,\r\n      left: 0,\r\n      top: 0,\r\n      width: \"100vw\",\r\n      height: \"100vh\",\r\n      ...style\r\n    }),\r\n    video: prefixStyle({\r\n      position: \"relative\",\r\n      objectFit: \"cover\",\r\n      width: 800,\r\n      height: 800,\r\n      background: theme.acrylicTexture60.background\r\n    }),\r\n    videoContent: prefixStyle({\r\n      cursor: \"pointer\",\r\n      ...columnCenter,\r\n      position: \"absolute\",\r\n      transition: \"all .25s 0s ease-in-out\",\r\n      left: 0,\r\n      top: 0,\r\n      width: \"100%\",\r\n      height: \"100%\",\r\n      opacity: isPlaying ? 0 : 1,\r\n      transform: `scale(${isPlaying ? 0 : 1})`,\r\n    })\r\n  };\r\n}\r\n\r\nexport default TeacherRoom;\r\n","import { ZegoClient } from \"webrtc-zego\";\r\nimport { MediaStreamConstraints, Config, StreamInfo } from \"webrtc-zego/sdk/common/zego.entity\";\r\n\r\ninterface SilverRoomCache {\r\n  appId: number;\r\n  signKey?: number[];\r\n\r\n  roomId?: string;\r\n  userId?: string;\r\n  publishStreamId: string;\r\n\r\n  loginToken: string;\r\n  loginTokenUrl?: string;\r\n  userName?: string;\r\n  streamList: StreamInfo[];\r\n  playingStreamIds: string[];\r\n\r\n  enableLayerCodec?: boolean;\r\n  sdkIsInitial?: boolean;\r\n  appVersion?: \"国内版\" | \"国际版\";\r\n  publishViewEl: HTMLVideoElement;\r\n}\r\n\r\nexport class SilverRoom extends ZegoClient {\r\n  _defaultCacheConfig: SilverRoomCache = {\r\n    publishStreamId: \"\",\r\n    streamList: [],\r\n    playingStreamIds: [],\r\n    enableLayerCodec: false,\r\n    sdkIsInitial: false,\r\n    appVersion: \"国内版\"\r\n  } as any;\r\n\r\n  _cacheSDKConfig: SilverRoomCache = {\r\n    ...this._defaultCacheConfig\r\n  } as SilverRoomCache;\r\n\r\n  constructor() {\r\n    super();\r\n    this.setUserStateUpdate(true);\r\n  }\r\n\r\n  /**\r\n   * 初始化 SDK\r\n   * \r\n   * @param  {{appId:number;signKey:number[];}} para?\r\n   * @param {para.appId} 获取的 appId\r\n   * @param {para.signKey} 获取的 signKey\r\n   */\r\n  initSDK(para: { appId: number; signKey: number[]; }) {\r\n    this._cacheSDKConfig.appId = para.appId;\r\n    this._cacheSDKConfig.signKey = para.signKey;\r\n  }\r\n\r\n  /**\r\n   * 加入音视频房间\r\n   * \r\n   * @param  {{roomId:string;userId?:string;userName?:string;}} para\r\n   */\r\n  join = async (para: { roomId: string; userId: string; userName?: string; }) => {\r\n    this._cacheSDKConfig.roomId = para.roomId;\r\n    const idName = para.userId;\r\n    this._cacheSDKConfig.userId = idName;\r\n    const nickName = para.userName || para.userId;\r\n    this._cacheSDKConfig.userName = nickName;\r\n\r\n    this._cacheSDKConfig.loginTokenUrl = this._cacheSDKConfig.appVersion === \"国内版\" ? `https://wsliveroom${this._cacheSDKConfig.appId}-api.zego.im:8282/token` : `https://wsliveroom${this._cacheSDKConfig.appId}-api.zegocloud.com:8282/token`;\r\n    const zegoConfig: Config = {\r\n      appid: this._cacheSDKConfig.appId,\r\n      server: this._cacheSDKConfig.appVersion === \"国内版\" ? `wss://wsliveroom${this._cacheSDKConfig.appId}-api.zego.im:8282/ws` : `wss://wsliveroom${this._cacheSDKConfig.appId}-api.zegocloud.com:8282/ws`,\r\n      idName,\r\n      nickName,\r\n      logLevel: 3,\r\n      logUrl: \"\",\r\n      audienceCreateRoom: true,\r\n      remoteLogLevel: 0,\r\n      testEnvironment: false\r\n    };\r\n    this.config(zegoConfig);\r\n\r\n    const getLoginToken = () => {\r\n      return new Promise((resolve, reject) => {\r\n        fetch(`${this._cacheSDKConfig.loginTokenUrl}?app_id=${this._cacheSDKConfig.appId}&id_name=${this._cacheSDKConfig.userId}`, {\r\n          method: \"GET\"\r\n        })\r\n        .then(res => {\r\n          if (typeof res === \"string\") {\r\n            resolve(res as string);\r\n          } else {\r\n            res.text().then((text: any) => {\r\n              resolve(text as string);\r\n            });\r\n          }\r\n          return res;\r\n        })\r\n        .catch(reject);\r\n      });\r\n    };\r\n\r\n    if (!this._cacheSDKConfig.loginToken) {\r\n      this._cacheSDKConfig.loginToken = await getLoginToken() as string;\r\n    }\r\n\r\n    console.error(this._cacheSDKConfig.loginToken);\r\n    return new Promise((resolve, reject) => {\r\n      this.login(decodeURIComponent(para.roomId), 2, this._cacheSDKConfig.loginToken, streamList => {\r\n        this.publish(this._cacheSDKConfig.publishStreamId);\r\n        this._cacheSDKConfig.streamList = streamList;\r\n        resolve(streamList);\r\n        if (this.handleStreamsUpdate) {\r\n          this.handleStreamsUpdate(streamList);\r\n        }\r\n      }, reject);\r\n    }) as Promise<StreamInfo[]>;\r\n  }\r\n\r\n  /** 离开房间\r\n   */\r\n  leave = () => {\r\n    return this.logout();\r\n  }\r\n\r\n  /** 反初始化 SDK\r\n   */\r\n  unInitSDK = () => {\r\n    this.stopPublish();\r\n    this.stopPreview();\r\n    this.leave();\r\n    this._cacheSDKConfig.streamList.forEach((stream, index) => {\r\n      this.stopPlayingStream(stream.stream_id);\r\n    });\r\n\r\n    this._cacheSDKConfig = { ...this._defaultCacheConfig };\r\n    if (this.handleStreamsUpdate) {\r\n      this.handleStreamsUpdate(this._cacheSDKConfig.streamList);\r\n    }\r\n\r\n    this.release();\r\n  }\r\n\r\n  /**\r\n   * 开始预览摄像头\r\n   * \r\n   * @param  {HTMLVideoElement} viewEl 设置 video 元素预览\r\n   * @param  {MediaStreamConstraints} mediaStreamConstraints? 媒体配置信息\r\n   * @param  {()=>void} success? 成功回调\r\n   * @param  {()=>void} error?失败回调\r\n   */\r\n  startPreview: any = (viewEl: HTMLVideoElement, mediaStreamConstraints?: MediaStreamConstraints, success?: ()=> void, error?: () => void ): any => {\r\n    this._cacheSDKConfig.publishViewEl = viewEl;\r\n    return new Promise((res, rej) => {\r\n      ZegoClient.prototype.startPreview.call(this, viewEl, {\r\n        audio: true,\r\n        audioInput: null,\r\n        video: true,\r\n        videoInput: null,\r\n        videoQuality: 2,\r\n        horizontal: true,\r\n        ...mediaStreamConstraints\r\n      }, res, rej);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 停止预览\r\n   * \r\n   * @param  {HTMLVideoElement} viewEl? HTMLVideoElement\r\n   */\r\n  stopPreview = (viewEl?: HTMLElement) => {\r\n    return ZegoClient.prototype.stopPreview.call(this, viewEl || this._cacheSDKConfig.publishViewEl);\r\n  }\r\n\r\n  /**\r\n   * 开始推流\r\n   * \r\n   * @param  {string} streamId? 设置推流 id\r\n   */\r\n  publish = (streamId?: string) => {\r\n    this._cacheSDKConfig.publishStreamId = streamId || `${Date.now()}-${Math.ceil(Math.random() * Math.pow(10, 8))}`;\r\n    this.startPublishingStream(this._cacheSDKConfig.publishStreamId, this._cacheSDKConfig.publishViewEl);\r\n  }\r\n\r\n\r\n  /**\r\n   * 停止推流\r\n   */\r\n  stopPublish = () => {\r\n    this.stopPublishingStream(this._cacheSDKConfig.publishStreamId);\r\n  }\r\n\r\n  /**\r\n   * 播放音视频流\r\n   * \r\n   * @param {{viewEl:HTMLCanvasElement|HTMLVideoElement,streamId:string}} stream 流对象\r\n   * @param {HTMLCanvasElement|HTMLVideoElement} stream.viewEl - 播放音视频的元素\r\n   * @param {string} stream.streamId - 播放音视频的流 id\r\n   */\r\n  playStream = (stream: { viewEl: HTMLCanvasElement | HTMLVideoElement, streamId: string }) => {\r\n    const code = this.startPlayingStream(stream.streamId, stream.viewEl);\r\n    if (!this._cacheSDKConfig.playingStreamIds.includes(stream.streamId)) {\r\n      this._cacheSDKConfig.playingStreamIds.push(stream.streamId);\r\n    }\r\n    return code;\r\n  }\r\n  /**\r\n   * 播放一组音视频流\r\n   * \r\n   * @param  {{viewEl:HTMLCanvasElement|HTMLVideoElement,streamId: string}} streams\r\n   */\r\n  playStreams = (streams: { viewEl: HTMLCanvasElement | HTMLVideoElement, streamId: string; }[]) => {\r\n    streams.forEach(stream => this.playStream(stream));\r\n  }\r\n  \r\n  /**\r\n   * 停止播放音视频流\r\n   * \r\n   * @param  {{streamId:string;}} stream 使用流 id 数组来停止播放流列表\r\n   */\r\n  stopPlayStream = (stream: { streamId: string; }) => {\r\n    this.stopPlayingStream(stream.streamId);\r\n    const index = this._cacheSDKConfig.playingStreamIds.indexOf(stream.streamId)\r\n    if (index > -1) {\r\n      this._cacheSDKConfig.playingStreamIds.splice(index, -1);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 停止播放一组流音视频\r\n   * \r\n   * @param  {string[]} streamListIds\r\n   */\r\n  stopPlayStreams = (streamIds: string[]) => {\r\n    streamIds.forEach(streamId => {\r\n      this.stopPlayStream({ streamId: streamId });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * 流更新回调函数\r\n   * \r\n   * @param  {number} type? 增加为0，减少为1\r\n   * @param  {StreamInfo[]} newStreamList? 新的音视频流\r\n   */\r\n  onStreamUpdated = (type?: number, newStreamList?: StreamInfo[]) => {\r\n    const { streamList } = this._cacheSDKConfig;\r\n    const streamListIds = streamList.map(stream => stream.stream_id);\r\n    const newStreamListIds = newStreamList ? newStreamList.map(stream => stream.stream_id) : [];\r\n    if (type === 0) {\r\n      newStreamListIds.forEach((id, index) => {\r\n        if (!streamListIds.includes(id)) {\r\n          let newStream = newStreamList ? newStreamList[index] : null;\r\n          if (newStream) {\r\n            streamList.push(newStream);\r\n          }\r\n        }\r\n      });\r\n    } else {\r\n      newStreamListIds.forEach((id, index) => {\r\n        const startIndex = streamListIds.indexOf(id);\r\n        if (startIndex > -1) {\r\n          this.stopPlayingStream(id);\r\n          streamList.splice(startIndex, 1);\r\n          const playingIndex = this._cacheSDKConfig.playingStreamIds.indexOf(id);\r\n          if (playingIndex > -1) {\r\n            this._cacheSDKConfig.playingStreamIds.splice(playingIndex, 1);\r\n          }\r\n        }\r\n      });\r\n    }\r\n    if (this.handleStreamsUpdate) {\r\n      this.handleStreamsUpdate(streamList);\r\n    }\r\n  };\r\n  \r\n  /**\r\n   * 当覆盖 onStreamUpdate 时，此函数无法调用\r\n   * \r\n   * @param  {{stream_id:string;[key:string]:any;}[]} streamList\r\n   */\r\n  handleStreamsUpdate = (streamList: { stream_id: string; [key: string]: any; }[]) => {};\r\n\r\n  getEventData = (key: string) => {}\r\n\r\n  handleEventDataChange = (key: string) => {\r\n    return {};\r\n  }\r\n}\r\n","declare var location: any;\r\n\r\nexport function getSearchQuery() {\r\n  const pattern = /\\?([^=]+\\=[^\\=]*\\&?)*$/g;\r\n  if (pattern.test(location.href)) {\r\n    const res = (location as any).href.match(pattern)[0];\r\n    return res ? res.slice(1).split(\"&\").reduce((prev: any, next: any) => {\r\n      const str = next.match(/([^=]+)\\=(.+)/);\r\n      try {\r\n        prev[str[1]] = decodeURIComponent(str[2]);\r\n      } catch (e) {\r\n        prev[str[1]] = str[2];\r\n      }\r\n      return prev;\r\n    }, {} as any) : {};\r\n  }\r\n\r\n  return {};\r\n}\r\n\r\nexport default getSearchQuery;\r\n","export const liveRoomConfig = {\r\n  appId: 1082937486,\r\n  signKey: [0x60, 0x25, 0xbf, 0x4c, 0xe1, 0x10, 0x42, 0xda, 0x3a, 0xa0, 0xf6, 0xab, 0xf8, 0x14, 0x9e, 0xcc, 0x48, 0x8a, 0x34, 0x08, 0x45, 0xac, 0x60, 0x77, 0x25, 0x1c, 0x00, 0x63, 0x4b, 0xc6, 0xd6, 0x9a]\r\n};\r\n"],"sourceRoot":""}