(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{1611:function(e,t,n){"use strict";n.r(t),n.d(t,"TeacherRoom",function(){return K});var a=n(110),i=n(20),o=n(555),c=n.n(o),r=n(556),s=n(84),u=n(85),l=n(87),p=n(86),f=n(88),h=n(2),d=n(25),m=n(138),g=n.n(m),S=n(557),v=n(558),C=n(559),y=n(562),b=new S.a;b.initSDK({appId:C.a.appId,signKey:C.a.signKey});var I=Object(v.a)().roomId,D=y.random.uuid(),K=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(n=Object(l.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).context=void 0,n.state={},n.videoEl=void 0,n.joinRoom=Object(r.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.join({roomId:I,userId:D});case 2:case"end":return e.stop()}},e)})),n.startShare=Object(r.a)(c.a.mark(function e(){return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.startPreview(n.videoEl);case 2:return n.setState({isPlaying:!0}),e.next=5,b.publish("".concat(I,"-streamId"));case 5:case"end":return e.stop()}},e)})),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){this.joinRoom()}},{key:"render",value:function(){var e=this,t=Object(i.a)({},this.props),n=this.context.theme,o=(this.state.isPlaying,function(e){var t=e.context.theme,n=e.props.style,i=e.state.isPlaying,o=t.prefixStyle,c={display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"};return{rowCenter:o({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}),columnCenter:o(c),root:o(Object(a.a)({},c,{left:0,top:0,width:"100vw",height:"100vh"},n)),video:o({position:"relative",objectFit:"cover",width:800,height:800,background:t.acrylicTexture60.background}),videoContent:o(Object(a.a)({cursor:"pointer"},c,{position:"absolute",transition:"all .25s 0s ease-in-out",left:0,top:0,width:"100%",height:"100%",opacity:i?0:1,transform:"scale(".concat(i?0:1,")")}))}}(this)),c=n.prepareStyles({styles:o});return h.createElement("div",Object.assign({},t,c.root),h.createElement("div",c.video,h.createElement("video",Object.assign({},c.video,{autoPlay:!0,ref:function(t){return e.videoEl=t}})),h.createElement("div",Object.assign({},c.videoContent,{onClick:this.startShare}),h.createElement(g.a,{size:120,children:"PlayLegacy"}),h.createElement("p",{style:{marginTop:24}},"\u5f00\u59cb\u76f4\u64ad"))))}}]),t}(h.Component);K.contextTypes={theme:d.object},t.default=K},557:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(555),i=n.n(a),o=n(556),c=n(110),r=n(84),s=n(85),u=n(87),l=n(86),p=n(139),f=n(88),h=n(561),d=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(u.a)(this,Object(l.a)(t).call(this)))._defaultCacheConfig={publishStreamId:"",streamList:[],playingStreamIds:[],enableLayerCodec:!1,sdkIsInitial:!1,appVersion:"\u56fd\u5185\u7248"},e._cacheSDKConfig=Object(c.a)({},e._defaultCacheConfig),e.join=function(){var t=Object(o.a)(i.a.mark(function t(n){var a,o,c,r;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e._cacheSDKConfig.roomId=n.roomId,a=n.userId,e._cacheSDKConfig.userId=a,o=n.userName||n.userId,e._cacheSDKConfig.userName=o,e._cacheSDKConfig.loginTokenUrl="\u56fd\u5185\u7248"===e._cacheSDKConfig.appVersion?"https://wsliveroom".concat(e._cacheSDKConfig.appId,"-api.zego.im:8282/token"):"https://wsliveroom".concat(e._cacheSDKConfig.appId,"-api.zegocloud.com:8282/token"),c={appid:e._cacheSDKConfig.appId,server:"\u56fd\u5185\u7248"===e._cacheSDKConfig.appVersion?"wss://wsliveroom".concat(e._cacheSDKConfig.appId,"-api.zego.im:8282/ws"):"wss://wsliveroom".concat(e._cacheSDKConfig.appId,"-api.zegocloud.com:8282/ws"),idName:a,nickName:o,logLevel:3,logUrl:"",audienceCreateRoom:!0,remoteLogLevel:0,testEnvironment:!1},e.config(c),r=function(){return new Promise(function(t,n){fetch("".concat(e._cacheSDKConfig.loginTokenUrl,"?app_id=").concat(e._cacheSDKConfig.appId,"&id_name=").concat(e._cacheSDKConfig.userId),{method:"GET"}).then(function(e){return"string"===typeof e?t(e):e.text().then(function(e){t(e)}),e}).catch(n)})},e._cacheSDKConfig.loginToken){t.next=13;break}return t.next=12,r();case 12:e._cacheSDKConfig.loginToken=t.sent;case 13:return console.error(e._cacheSDKConfig.loginToken),t.abrupt("return",new Promise(function(t,a){e.login(decodeURIComponent(n.roomId),2,e._cacheSDKConfig.loginToken,function(n){e.publish(e._cacheSDKConfig.publishStreamId),e._cacheSDKConfig.streamList=n,t(n),e.handleStreamsUpdate&&e.handleStreamsUpdate(n)},a)}));case 15:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),e.leave=function(){return e.logout()},e.unInitSDK=function(){e.stopPublish(),e.stopPreview(),e.leave(),e._cacheSDKConfig.streamList.forEach(function(t,n){e.stopPlayingStream(t.stream_id)}),e._cacheSDKConfig=Object(c.a)({},e._defaultCacheConfig),e.handleStreamsUpdate&&e.handleStreamsUpdate(e._cacheSDKConfig.streamList),e.release()},e.startPreview=function(t,n,a,i){return e._cacheSDKConfig.publishViewEl=t,new Promise(function(a,i){h.ZegoClient.prototype.startPreview.call(Object(p.a)(e),t,Object(c.a)({audio:!0,audioInput:null,video:!0,videoInput:null,videoQuality:2,horizontal:!0},n),a,i)})},e.stopPreview=function(t){return h.ZegoClient.prototype.stopPreview.call(Object(p.a)(e),t||e._cacheSDKConfig.publishViewEl)},e.publish=function(t){e._cacheSDKConfig.publishStreamId=t||"".concat(Date.now(),"-").concat(Math.ceil(Math.random()*Math.pow(10,8))),e.startPublishingStream(e._cacheSDKConfig.publishStreamId,e._cacheSDKConfig.publishViewEl)},e.stopPublish=function(){e.stopPublishingStream(e._cacheSDKConfig.publishStreamId)},e.playStream=function(t){var n=e.startPlayingStream(t.streamId,t.viewEl);return e._cacheSDKConfig.playingStreamIds.includes(t.streamId)||e._cacheSDKConfig.playingStreamIds.push(t.streamId),n},e.playStreams=function(t){t.forEach(function(t){return e.playStream(t)})},e.stopPlayStream=function(t){e.stopPlayingStream(t.streamId);var n=e._cacheSDKConfig.playingStreamIds.indexOf(t.streamId);n>-1&&e._cacheSDKConfig.playingStreamIds.splice(n,-1)},e.stopPlayStreams=function(t){t.forEach(function(t){e.stopPlayStream({streamId:t})})},e.onStreamUpdated=function(t,n){var a=e._cacheSDKConfig.streamList,i=a.map(function(e){return e.stream_id}),o=n?n.map(function(e){return e.stream_id}):[];0===t?o.forEach(function(e,t){if(!i.includes(e)){var o=n?n[t]:null;o&&a.push(o)}}):o.forEach(function(t,n){var o=i.indexOf(t);if(o>-1){e.stopPlayingStream(t),a.splice(o,1);var c=e._cacheSDKConfig.playingStreamIds.indexOf(t);c>-1&&e._cacheSDKConfig.playingStreamIds.splice(c,1)}}),e.handleStreamsUpdate&&e.handleStreamsUpdate(a)},e.handleStreamsUpdate=function(e){},e.getEventData=function(e){},e.handleEventDataChange=function(e){return{}},e.setUserStateUpdate(!0),e}return Object(f.a)(t,e),Object(s.a)(t,[{key:"initSDK",value:function(e){this._cacheSDKConfig.appId=e.appId,this._cacheSDKConfig.signKey=e.signKey}}]),t}(h.ZegoClient)},558:function(e,t,n){"use strict";t.a=function(){var e=/\?([^=]+\=[^\=]*\&?)*$/g;if(e.test(location.href)){var t=location.href.match(e)[0];return t?t.slice(1).split("&").reduce(function(e,t){var n=t.match(/([^=]+)\=(.+)/);try{e[n[1]]=decodeURIComponent(n[2])}catch(a){e[n[1]]=n[2]}return e},{}):{}}return{}}},559:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var a={appId:1082937486,signKey:[96,37,191,76,225,16,66,218,58,160,246,171,248,20,158,204,72,138,52,8,69,172,96,119,37,28,0,99,75,198,214,154]}}}]);
//# sourceMappingURL=5.7bac935b.chunk.js.map